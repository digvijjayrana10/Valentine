<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valentine üíò</title>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      height: 100vh;
      overflow: hidden;
      font-family: "Segoe UI", system-ui, Arial, sans-serif;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at top, #ffe3ec 0%, #ff9ab3 40%, #ff6f91 100%);
    }

    /* floating hearts */
    .hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }
    .heart {
      position: absolute;
      bottom: -30px;
      font-size: 18px;
      opacity: 0.85;
      animation: floatUp linear forwards;
      filter: drop-shadow(0 8px 10px rgba(0,0,0,0.15));
    }
    @keyframes floatUp {
      from { transform: translateY(0) scale(1); opacity: 0.9; }
      to { transform: translateY(-120vh) scale(1.8); opacity: 0; }
    }

    /* main card */
    .card {
      position: relative;
      z-index: 2;
      width: min(92vw, 440px);
      background: rgba(255,255,255,0.92);
      border-radius: 26px;
      padding: 28px 22px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      backdrop-filter: blur(8px);
      text-align: center;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 999px;
      background: #ffe6ee;
      color: #ff2d6f;
      font-weight: 800;
      font-size: 14px;
      margin-bottom: 12px;
    }

    h1 {
      margin: 8px 0 10px;
      color: #ff2d6f;
      font-size: 22px;
      line-height: 1.25;
    }

    .type {
      min-height: 46px;
      font-size: 16px;
      color: #333;
      margin: 8px 0 18px;
      font-weight: 650;
    }

    .btnRow {
      display: flex;
      justify-content: center;
      gap: 14px;
      margin-top: 10px;
    }

    button {
      border: none;
      border-radius: 16px;
      padding: 12px 18px;
      font-size: 16px;
      font-weight: 900;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    #yes {
      background: linear-gradient(135deg, #ff2d6f, #ff6f91);
      color: white;
      box-shadow: 0 12px 22px rgba(255,45,111,0.35);
    }
    #yes:hover { transform: scale(1.05); }

    #no {
      position: fixed;
      z-index: 5;
      background: #2b2b2b;
      color: white;
      box-shadow: 0 12px 22px rgba(0,0,0,0.25);
    }
    #no.shake { animation: shake 0.25s linear; }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-6px); }
      100% { transform: translateX(0); }
    }

    /* message */
    #msg {
      display: none;
      margin-top: 18px;
      padding: 14px 14px;
      border-radius: 18px;
      background: #fff0f5;
      color: #ff2d6f;
      font-weight: 950;
      font-size: 18px;
      line-height: 1.3;
      box-shadow: inset 0 0 0 2px rgba(255,45,111,0.15);
    }

    /* confetti */
    .confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 10;
      overflow: hidden;
      display: none;
    }
    .piece {
      position: absolute;
      width: 10px;
      height: 14px;
      opacity: 0.9;
      top: -20px;
      animation: fall linear forwards;
      border-radius: 4px;
    }
    @keyframes fall {
      to { transform: translateY(120vh) rotate(720deg); opacity: 1; }
    }

    .footer {
      margin-top: 16px;
      font-size: 12px;
      color: #666;
      font-weight: 750;
    }

    /* music controls */
    .musicBar {
      position: fixed;
      top: 14px;
      right: 14px;
      z-index: 50;
      display: flex;
      gap: 10px;
    }
    .musicBtn {
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 14px;
      font-weight: 900;
      background: rgba(255,255,255,0.9);
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }

    /* popup after YES */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.35);
      display: none;
      z-index: 60;
      place-items: center;
      padding: 18px;
    }
    .popup {
      width: min(92vw, 520px);
      background: rgba(255,255,255,0.95);
      border-radius: 26px;
      padding: 18px 16px;
      text-align: center;
      box-shadow: 0 25px 70px rgba(0,0,0,0.35);
      transform: translateY(30px) scale(0.96);
      opacity: 0;
      animation: pop 0.45s ease forwards;
    }
    @keyframes pop {
      to { transform: translateY(0) scale(1); opacity: 1; }
    }

    .rose {
      font-size: 46px;
      animation: roseDance 1.1s ease-in-out infinite;
      display: inline-block;
      margin-top: 6px;
    }
    @keyframes roseDance {
      0% { transform: rotate(-10deg) scale(1); }
      50% { transform: rotate(10deg) scale(1.08); }
      100% { transform: rotate(-10deg) scale(1); }
    }

    .photo {
      width: 100%;
      border-radius: 20px;
      margin-top: 12px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.25);
      overflow: hidden;
    }
    .photo img {
      width: 100%;
      height: 260px;
      object-fit: cover;
      display: block;
    }

    .popup h2 {
      margin: 10px 0 6px;
      color: #ff2d6f;
      font-size: 20px;
    }
    .popup p {
      margin: 0 0 10px;
      color: #333;
      font-weight: 700;
    }
  </style>
</head>

<body>
  <div class="hearts" id="hearts"></div>
  <div class="confetti" id="confetti"></div>

  <!-- Music Controls -->
  <div class="musicBar">
    <button class="musicBtn" id="playBtn" style="display:none;">Tap to Play üé∂</button>
    <button class="musicBtn" id="muteBtn">üîä Music</button>
  </div>

  <div class="card">
    <div class="badge">üíò Valentine Special</div>

    <h1>Shubhangi ‚ù§Ô∏è<br>Will you be my Valentine?</h1>

    <div class="type" id="typeText"></div>

    <div class="btnRow">
      <button id="yes">Yes üíñ</button>
    </div>

    <div id="msg">I love you the most ‚ù§Ô∏èü•∫ü´∂</div>
    <div class="footer">Made with love üòÑ</div>
  </div>

  <button id="no">No üò¢</button>

  <!-- Popup after YES -->
  <div class="overlay" id="overlay">
    <div class="popup">
      <div class="rose">üåπ</div>
      <h2>YAYYYYY! üò≠üíò</h2>
      <p>Now you‚Äôre officially my Valentine üíñ</p>

      <!-- You can replace image with your own -->
      <div class="photo">
        <img src="photo.jpg" alt="Love" />

      </div>

      <p style="margin-top:10px;">Forever & Always ü´∂‚ú®</p>
      <button class="musicBtn" id="closePopup">Okayyy ü•∫‚ù§Ô∏è</button>
    </div>
  </div>

  <!-- Background Music -->
  <audio id="bgm" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ---------- Typewriter ----------
    const typeEl = document.getElementById("typeText");
    const lines = [
      "Ek question hai‚Ä¶ ü•∫",
      "Thoda sa important‚Ä¶ üíó",
      "Sirf ek baar 'Yes' bol do üò≠üíò"
    ];
    let i = 0, j = 0, current = "", deleting = false;

    function typeWriter() {
      const full = lines[i];

      if (!deleting) {
        current = full.slice(0, j++);
        typeEl.textContent = current;
        if (j > full.length + 10) deleting = true;
      } else {
        current = full.slice(0, j--);
        typeEl.textContent = current;
        if (j <= 0) {
          deleting = false;
          i = (i + 1) % lines.length;
        }
      }
      setTimeout(typeWriter, deleting ? 45 : 65);
    }
    typeWriter();

    // ---------- Hearts ----------
    const hearts = document.getElementById("hearts");
    const heartChars = ["üíó","üíñ","üíò","üíï","üíû","‚ù§Ô∏è"];
    function spawnHeart() {
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = heartChars[Math.floor(Math.random() * heartChars.length)];
      h.style.left = Math.random() * 100 + "vw";
      h.style.animationDuration = (4 + Math.random() * 3) + "s";
      h.style.fontSize = (16 + Math.random() * 18) + "px";
      hearts.appendChild(h);
      setTimeout(() => h.remove(), 8000);
    }
    setInterval(spawnHeart, 250);

    // ---------- No button runaway ----------
    const noBtn = document.getElementById("no");
    const yesBtn = document.getElementById("yes");
    const msg = document.getElementById("msg");

    function placeNoBtn() {
      const pad = 18;
      const maxX = window.innerWidth - noBtn.offsetWidth - pad;
      const maxY = window.innerHeight - noBtn.offsetHeight - pad;

      const x = Math.max(pad, Math.random() * maxX);
      const y = Math.max(pad, Math.random() * maxY);

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";

      noBtn.classList.remove("shake");
      void noBtn.offsetWidth;
      noBtn.classList.add("shake");
    }

    window.onload = () => {
      placeNoBtn();
      setTimeout(placeNoBtn, 1000);
      tryAutoPlay();
    };
    window.onresize = placeNoBtn;

    noBtn.addEventListener("mouseover", placeNoBtn);
    noBtn.addEventListener("mousedown", placeNoBtn);
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      placeNoBtn();
    }, { passive: false });

    // ---------- Confetti ----------
    const confetti = document.getElementById("confetti");
    function launchConfetti() {
      confetti.style.display = "block";
      confetti.innerHTML = "";

      const pieces = 120;
      for (let k = 0; k < pieces; k++) {
        const p = document.createElement("div");
        p.className = "piece";
        p.style.left = Math.random() * 100 + "vw";
        p.style.animationDuration = (2 + Math.random() * 2.5) + "s";
        p.style.transform = `rotate(${Math.random() * 360}deg)`;
        p.style.background = `hsl(${Math.random() * 360}, 90%, 60%)`;
        confetti.appendChild(p);

        const drift = (Math.random() * 200 - 100);
        p.animate(
          [{ transform: `translateX(0) rotate(0deg)` },
           { transform: `translateX(${drift}px) rotate(720deg)` }],
          { duration: 2000 + Math.random() * 2000, iterations: 1, fill: "forwards" }
        );

        setTimeout(() => p.remove(), 6000);
      }

      setTimeout(() => confetti.style.display = "none", 4500);
    }

    // ---------- Popup ----------
    const overlay = document.getElementById("overlay");
    const closePopup = document.getElementById("closePopup");

    closePopup.addEventListener("click", () => {
      overlay.style.display = "none";
    });

    // ---------- Music ----------
    const bgm = document.getElementById("bgm");
    const muteBtn = document.getElementById("muteBtn");
    const playBtn = document.getElementById("playBtn");

    bgm.volume = 0.35;

    function setMuteUI() {
      muteBtn.textContent = bgm.muted ? "üîá Muted" : "üîä Music";
    }

    async function tryAutoPlay() {
      try {
        await bgm.play();
        playBtn.style.display = "none";
        setMuteUI();
      } catch (e) {
        // autoplay blocked
        playBtn.style.display = "inline-block";
      }
    }

    playBtn.addEventListener("click", async () => {
      await bgm.play();
      playBtn.style.display = "none";
      setMuteUI();
    });

    muteBtn.addEventListener("click", () => {
      bgm.muted = !bgm.muted;
      setMuteUI();
    });

    // ---------- Yes click ----------
    yesBtn.addEventListener("click", async () => {
      msg.style.display = "block";
      yesBtn.style.display = "none";
      noBtn.style.display = "none";

      launchConfetti();
      overlay.style.display = "grid";

      // ensure music plays after click (allowed)
      try { await bgm.play(); } catch(e) {}
    });

    setMuteUI();
  </script>
</body>
</html>
